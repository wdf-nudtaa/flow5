
#make install libXFoil

export VERSION=flow5_v7.52_linux
export RELEASEDIR=/home/techwinder/techwing/build/flow5_v7.52/xfl
export EXPORTDIR=/home/techwinder/techwing/releases
export IMAGEDIR=$EXPORTDIR/$VERSION


rm -rf $IMAGEDIR
mkdir $IMAGEDIR
cd $IMAGEDIR


/home/techwinder/bin/linuxdeployqt/linuxdeployqt-7-x86_64.AppImage $RELEASEDIR/flow5 -qmake=/opt/Qt/5.12.5/gcc_64/bin/qmake -bundle-non-qt-libs -appimage -always-overwrite


cp $RELEASEDIR/flow5           $IMAGEDIR
mv $RELEASEDIR/lib             $IMAGEDIR
mv $RELEASEDIR/plugins         $IMAGEDIR
mv $RELEASEDIR/translations    $IMAGEDIR
mv $RELEASEDIR/AppRun          $IMAGEDIR
mv $RELEASEDIR/qt.conf         $IMAGEDIR

cp /home/techwinder/techwing/flow5_v7.52/xfl/meta/linux/flow5.desktop                          $IMAGEDIR
cp /home/techwinder/techwing/flow5_v7.52/xfl/meta/mac/iconset/appicon.iconset/icon_128x128.png $IMAGEDIR/flow5.png
cp /home/techwinder/techwing/flow5_v7.52/xfl/meta/mac/iconset/docicon.iconset/icon_128x128.png $IMAGEDIR/flow5_doc.png
cp /home/techwinder/techwing/flow5_v7.52/xfl/xflwidgets/textfiles/colorlist.txt                $IMAGEDIR
cp -r /home/techwinder/techwing/flow5_v7.52/xfl/xfl/resources/qss/flow5_dark.css       $IMAGEDIR
cp -r /home/techwinder/techwing/flow5_v7.52/xfl/xfl/resources/qss/qss-img              $IMAGEDIR

cp /home/techwinder/bin/mkl/2021.3.0/lib/intel64/libmkl_avx2.so.1 $IMAGEDIR/lib
cp /home/techwinder/bin/mkl/2021.3.0/lib/intel64//libmkl_def.so.1  $IMAGEDIR/lib

cd $EXPORTDIR
tar -zcvf $VERSION.tar.gz $VERSION
